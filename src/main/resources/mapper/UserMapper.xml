<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.hr.dao.UserMapper">
	<resultMap id="BaseResultMap" type="com.hr.bean.User">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<id column="user_id" property="userId" jdbcType="INTEGER" />
		<result column="user_name" property="userName" jdbcType="VARCHAR" />
		<result column="user_password" property="userPassword"
			jdbcType="VARCHAR" />
		<result column="role" property="role" jdbcType="INTEGER" />
		<result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
		<result column="user_status" property="userStatus" jdbcType="INTEGER" />
		<result column="ext_a" property="extA" jdbcType="VARCHAR" />
		<result column="ext_b" property="extB" jdbcType="VARCHAR" />
		<result column="ext_c" property="extC" jdbcType="VARCHAR" />
	</resultMap>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		delete from user
		where user_id = #{userId,jdbcType=INTEGER}
	</delete>
	<insert id="insert" parameterType="com.hr.bean.User">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<selectKey resultType="java.lang.Integer" keyProperty="userId"
			order="AFTER">
			SELECT LAST_INSERT_ID()
		</selectKey>
		insert into user (user_name, user_password, `role`,
		create_time,
		user_status, ext_a,
		ext_b, ext_c)
		values (#{userName,jdbcType=VARCHAR},
		#{userPassword,jdbcType=VARCHAR},
		#{role,jdbcType=INTEGER},
		now(),
		#{userStatus,jdbcType=INTEGER}, #{extA,jdbcType=VARCHAR},
		#{extB,jdbcType=VARCHAR}, #{extC,jdbcType=VARCHAR})
	</insert>
	<update id="updateByPrimaryKey" parameterType="com.hr.bean.User">
		update user
		<set>
			<if test="userName !=null and userName !=''">
				user_name = #{userName,jdbcType=VARCHAR},
			</if>
			<if test="role !=null and role !=''">
				`role` = #{role,jdbcType=INTEGER},
			</if>
			<if test="userPassword !=null and userPassword !=''">
				user_password = #{userPassword,jdbcType=VARCHAR},
			</if>
			<if test="createTime !=null and createTime !=''">
				create_time = #{createTime,jdbcType=TIMESTAMP},
			</if>
			<if test="userStatus !=null">
				user_status = #{userStatus,jdbcType=INTEGER},
			</if>
			<if test="extA !=null and extA !=''">
				ext_a = #{extA,jdbcType=VARCHAR},
			</if>
			<if test="extB !=null and extB !=''">
				ext_b= #{extB,jdbcType=VARCHAR},
			</if>
			<if test="extC !=null and extC !=''">
				ext_c=#{extC,jdbcType=VARCHAR}
			</if>
		</set>
		where
		user_id = #{userId,jdbcType=INTEGER}
	</update>
	<select id="selectByPrimaryKey" resultMap="BaseResultMap"
		parameterType="java.lang.Integer">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select user_id, user_name, user_password, `role`, create_time,
		user_status, ext_a,
		ext_b, ext_c
		from user
		where user_id =
		#{userId,jdbcType=INTEGER}
	</select>
	<select id="selectAll" resultMap="BaseResultMap" parameterType="com.hr.bean.User">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select user_id, user_name, user_password, `role`, create_time,
		user_status, ext_a,
		ext_b, ext_c
		from user
		<where>
			<if test="userName !=null and userName !=''">
				and user_name like CONCAT('%',#{userName},'%')
			</if>
			<if test="role !=null and role !=''">
				and role=#{role}
			</if>
		</where>
	</select>
	<!-- 用户登录信息 -->
	<select id="login" resultMap="BaseResultMap" parameterType="com.hr.bean.User">
		select user_id, user_name, user_password, `role`, create_time,
		user_status, ext_a,
		ext_b, ext_c
		from user
		where user_name=#{userName}
		and user_password=#{userPassword}
		and user_status = #{userStatus,jdbcType=INTEGER}
	</select>
	<select id="selectByBean" resultMap="BaseResultMap"
		parameterType="com.hr.bean.User">
		select user_id, user_name, user_password, `role`, create_time,
		user_status, ext_a,
		ext_b, ext_c
		from user
		<where>
			<if test="userName !=null and userName !=''">
				and user_name = #{userName}
			</if>
			<if test="role !=null and role !=''">
				and role=#{role}
			</if>
		</where>
	</select>

</mapper>